# üß™ WebRTC SIP –∫–ª–∏–µ–Ω—Ç –Ω–∞ Asterisk + JsSIP

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π SIP-–∫–ª–∏–µ–Ω—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ WebRTC, –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–π –∫ Asterisk —á–µ—Ä–µ–∑ WebSocket (`ws://localhost:8088/ws`) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [JsSIP](https://jssip.net/).

---

## ‚öôÔ∏è –°–æ—Å—Ç–∞–≤ –ø—Ä–æ–µ–∫—Ç–∞

- Asterisk 18+ –≤ Docker
- JsSIP —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ HTML/JS
- SIP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ 6001 –∏ 6003
- WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Asterisk HTTP —Å–µ—Ä–≤–µ—Ä (`res_http_websocket.so`)

---

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone git@github.com:maxboom/debian-asterisk.git
cd debian-asterisk
```

### 2. –ó–∞–ø—É—Å—Ç–∏ Asterisk –≤ Docker
```bash
docker-compose up --build
```

### 3. –û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∫–ª–∏–µ–Ω—Ç
**–û—Ç–∫—Ä–æ–π [index.html](client/index.html) –≤ –±—Ä–∞—É–∑–µ—Ä–µ.**

___

### üîë –£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –ü–∞—Ä–æ–ª—å |
| ------------ | ------ |
| 6001         | 1234   |
| 6003         | 1234   |

### ‚ùì –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- üî¥ **JsSIP "Timer B expired"** ‚Üí Asterisk –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç WebSocket.
- üü† **ICE: disconnected** ‚Üí  –ø—Ä–æ–±–ª–µ–º–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ ICE/STUN. –í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π –∞–¥—Ä–µ—Å –¥–ª—è asterisk.
- üîµ **WebSocket error** ‚Üí —É–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 8088 –æ—Ç–∫—Ä—ã—Ç –∏ res_http_websocket.so –∑–∞–≥—Ä—É–∂–µ–Ω.



